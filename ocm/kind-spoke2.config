# Kind configuration for OCM Spoke cluster 2
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: ocm-spoke2
networking:
  # Use dual stack for better compatibility
  ipFamily: dual
  # Disable default CNI to install Cilium for better networking
  disableDefaultCNI: true
  # Different subnets to avoid conflicts with hub and other spokes
  podSubnet: "10.30.0.0/16"
  serviceSubnet: "10.31.0.0/16"
  # Expose API server port for OCM communication
  apiServerAddress: "127.0.0.1"
  apiServerPort: 6445
nodes:
  - role: control-plane
    # Mount Docker socket for potential cluster API usage
    extraMounts:
      - hostPath: /Users/lookfar/.docker/run/docker.sock
        containerPath: /var/run/docker.sock
    # Expose additional ports for OCM components
    extraPortMappings:
      - containerPort: 30004
        hostPort: 30004
        protocol: TCP
      - containerPort: 30005
        hostPort: 30005
        protocol: TCP
  - role: worker
    extraMounts:
      - hostPath: /Users/lookfar/.docker/run/docker.sock
        containerPath: /var/run/docker.sock
