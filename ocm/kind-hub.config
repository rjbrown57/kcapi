# Kind configuration for OCM Hub cluster
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: ocm-hub
networking:
  # Use dual stack for better compatibility
  ipFamily: dual
  # Disable default CNI to install Cilium for better networking
  disableDefaultCNI: true
  # Specific pod and service subnets to avoid conflicts
  podSubnet: "10.10.0.0/16"
  serviceSubnet: "10.11.0.0/16"
  # Expose API server port for OCM communication
  apiServerAddress: "0.0.0.0"
  apiServerPort: 6443
nodes:
  - role: control-plane
    # Mount Docker socket for potential cluster API usage
    extraMounts:
      - hostPath: /Users/lookfar/.docker/run/docker.sock
        containerPath: /var/run/docker.sock
    # Expose additional ports for OCM components
    extraPortMappings:
      - containerPort: 30000
        hostPort: 30000
        protocol: TCP
      - containerPort: 30001
        hostPort: 30001
        protocol: TCP
  - role: worker
    extraMounts:
      - hostPath: /Users/lookfar/.docker/run/docker.sock
        containerPath: /var/run/docker.sock
